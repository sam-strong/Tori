<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: HighLine::Menu</title>

  <link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../lib/highline/menu_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/highline/menu.rb">lib/highline/menu.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="Question.html">HighLine::Question</a></p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-choice">#choice</a></li>
          
          <li><a href="#method-i-choices">#choices</a></li>
          
          <li><a href="#method-i-help">#help</a></li>
          
          <li><a href="#method-i-hidden">#hidden</a></li>
          
          <li><a href="#method-i-index-3D">#index=</a></li>
          
          <li><a href="#method-i-init_help">#init_help</a></li>
          
          <li><a href="#method-i-layout-3D">#layout=</a></li>
          
          <li><a href="#method-i-options">#options</a></li>
          
          <li><a href="#method-i-select">#select</a></li>
          
          <li><a href="#method-i-to_ary">#to_ary</a></li>
          
          <li><a href="#method-i-to_str">#to_str</a></li>
          
          <li><a href="#method-i-update_responses">#update_responses</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../CHANGELOG.html">CHANGELOG</a></li>
        
          <li class="file"><a href="../INSTALL.html">INSTALL</a></li>
        
          <li class="file"><a href="../LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="../README_rdoc.html">README.rdoc</a></li>
        
          <li class="file"><a href="../TODO.html">TODO</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../HighLine.html">HighLine</a></li>
        
          <li><a href="../HighLine/ColorScheme.html">HighLine::ColorScheme</a></li>
        
          <li><a href="../HighLine/HighLine.html">HighLine::HighLine</a></li>
        
          <li><a href="../HighLine/HighLine/HighLine.html">HighLine::HighLine::HighLine</a></li>
        
          <li><a href="../HighLine/HighLine/HighLine/String.html">HighLine::HighLine::HighLine::String</a></li>
        
          <li><a href="../HighLine/Menu.html">HighLine::Menu</a></li>
        
          <li><a href="../HighLine/Question.html">HighLine::Question</a></li>
        
          <li><a href="../HighLine/Question/NoAutoCompleteMatch.html">HighLine::Question::NoAutoCompleteMatch</a></li>
        
          <li><a href="../HighLine/QuestionError.html">HighLine::QuestionError</a></li>
        
          <li><a href="../HighLine/SampleColorScheme.html">HighLine::SampleColorScheme</a></li>
        
          <li><a href="../HighLine/Simulate.html">HighLine::Simulate</a></li>
        
          <li><a href="../HighLine/StringExtensions.html">HighLine::StringExtensions</a></li>
        
          <li><a href="../HighLine/Style.html">HighLine::Style</a></li>
        
          <li><a href="../HighLine/SystemExtensions.html">HighLine::SystemExtensions</a></li>
        
          <li><a href="../HighLine/SystemExtensions/WinAPI.html">HighLine::SystemExtensions::WinAPI</a></li>
        
          <li><a href="../IO.html">IO</a></li>
        
          <li><a href="../Kernel.html">Kernel</a></li>
        
          <li><a href="../Object.html">Object</a></li>
        
          <li><a href="../String.html">String</a></li>
        
          <li><a href="../StringIO.html">StringIO</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">HighLine::Menu</h1>

    <div id="description" class="description">
      
<p><a href="Menu.html">Menu</a> objects encapsulate all the details of a call
to HighLine.choose(). Using the accessors and <a
href="Menu.html#method-i-choice">Menu.choice()</a> and <a
href="Menu.html#method-i-choices">Menu.choices()</a>, the block passed to
HighLine.choose() can detail all aspects of menu display and control.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="flow-attribute-method" class="method-detail">
          <a name="flow"></a>
          
          <a name="flow="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">flow</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>This attribute is passed directly on as the mode to HighLine.list() by all
the preset layouts.  See that method for appropriate settings.</p>
          
          </div>
        </div>
        
        <div id="header-attribute-method" class="method-detail">
          <a name="header"></a>
          
          <a name="header="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">header</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>Used by all the preset layouts to display title and/or introductory
information, when set.  Defaults to <tt>nil</tt>.</p>
          
          </div>
        </div>
        
        <div id="index-attribute-method" class="method-detail">
          <a name="index"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">index</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>An <em>index</em> to append to each menu item in display.  See <a
href="Menu.html#method-i-index-3D">Menu.index=()</a> for details.</p>
          
          </div>
        </div>
        
        <div id="index_suffix-attribute-method" class="method-detail">
          <a name="index_suffix"></a>
          
          <a name="index_suffix="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">index_suffix</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>The <a href="../String.html">String</a> placed between an <em>index</em>
and a menu item.  Defaults to “. ”.  Switches to “ ”, when <em>index</em>
is set to a <a href="../String.html">String</a> (like “-”).</p>
          
          </div>
        </div>
        
        <div id="layout-attribute-method" class="method-detail">
          <a name="layout"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">layout</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>An ERb <em>layout</em> to use when displaying this <a
href="Menu.html">Menu</a> object.  See <a
href="Menu.html#method-i-layout-3D">Menu.layout=()</a> for details.</p>
          
          </div>
        </div>
        
        <div id="list_option-attribute-method" class="method-detail">
          <a name="list_option"></a>
          
          <a name="list_option="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">list_option</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>This setting is passed on as the third parameter to HighLine.list() by all
the preset layouts.  See that method for details of its effects.  Defaults
to <tt>nil</tt>.</p>
          
          </div>
        </div>
        
        <div id="nil_on_handled-attribute-method" class="method-detail">
          <a name="nil_on_handled"></a>
          
          <a name="nil_on_handled="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">nil_on_handled</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>When <tt>true</tt>, any selected item handled by provided action code will
return <tt>nil</tt>, instead of the results to the action code.  This may
prove handy when dealing with mixed menus where only the names of items
without any code (and <tt>nil</tt>, of course) will be returned. Defaults
to <tt>false</tt>.</p>
          
          </div>
        </div>
        
        <div id="prompt-attribute-method" class="method-detail">
          <a name="prompt"></a>
          
          <a name="prompt="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">prompt</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>Used by all the preset layouts to ask the actual question to fetch a menu
selection from the user.  Defaults to “?  ”.</p>
          
          </div>
        </div>
        
        <div id="select_by-attribute-method" class="method-detail">
          <a name="select_by"></a>
          
          <a name="select_by="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">select_by</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>The <em><a href="Menu.html#attribute-i-select_by">select_by</a></em>
attribute controls how the user is allowed to pick a menu item.  The
available choices are:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p><tt>:index</tt></p></td>
<td>
<p>The user is allowed to type the numerical or alphabetical index for their
selection.</p>
</td></tr><tr><td class="rdoc-term"><p><tt>:index_or_name</tt></p></td>
<td>
<p>Allows both methods from the <tt>:index</tt> option and the <tt>:name</tt>
option.</p>
</td></tr><tr><td class="rdoc-term"><p><tt>:name</tt></p></td>
<td>
<p><a href="Menu.html">Menu</a> items are selected by typing a portion of the
item name that will be auto-completed.</p>
</td></tr></table>
          
          </div>
        </div>
        
        <div id="shell-attribute-method" class="method-detail">
          <a name="shell"></a>
          
          <a name="shell="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">shell</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>When set to <tt>true</tt>, responses are allowed to be an entire line of
input, including details beyond the command itself.  Only the first “word”
of input will be matched against the menu choices, but both the command
selected and the rest of the line will be passed to provided action blocks.
Defaults to <tt>false</tt>.</p>
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">( )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Create an instance of <a href="Menu.html">HighLine::Menu</a>.  All
customization is done through the passed block, which should call accessors
and choice() and choices() as needed to define the <a
href="Menu.html">Menu</a>.  Note that Menus are also Questions, so all that
functionality is available to the block as well.</p>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/highline/menu.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(  )
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># Initialize Question objects with ignored values, we'll</span>
  <span class="ruby-comment"># adjust ours as needed.</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">super</span>(<span class="ruby-string">&quot;Ignored&quot;</span>, [ ], &amp;<span class="ruby-keyword">nil</span>)    <span class="ruby-comment"># avoiding passing the block along</span>

  <span class="ruby-ivar">@items</span>           = [ ]
  <span class="ruby-ivar">@hidden_items</span>    = [ ]
  <span class="ruby-ivar">@help</span>            = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;There's no help for that topic.&quot;</span>)

  <span class="ruby-ivar">@index</span>           = <span class="ruby-value">:number</span>
  <span class="ruby-ivar">@index_suffix</span>    = <span class="ruby-string">&quot;. &quot;</span>
  <span class="ruby-ivar">@select_by</span>       = <span class="ruby-value">:index_or_name</span>
  <span class="ruby-ivar">@flow</span>            = <span class="ruby-value">:rows</span>
  <span class="ruby-ivar">@list_option</span>     = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@header</span>          = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@prompt</span>          = <span class="ruby-string">&quot;?  &quot;</span>
  <span class="ruby-ivar">@layout</span>          = <span class="ruby-value">:list</span>
  <span class="ruby-ivar">@shell</span>           = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@nil_on_handled</span>  = <span class="ruby-keyword">false</span>

  <span class="ruby-comment"># Override Questions responses, we'll set our own.</span>
  <span class="ruby-ivar">@responses</span>       = { }
  <span class="ruby-comment"># Context for action code.</span>
  <span class="ruby-ivar">@highline</span>        = <span class="ruby-keyword">nil</span>

  <span class="ruby-keyword">yield</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>

  <span class="ruby-identifier">init_help</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@shell</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@help</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="choice-method" class="method-detail ">
          <a name="method-i-choice"></a>

          
          <div class="method-heading">
            <span class="method-name">choice</span><span
              class="method-args">( name, help = nil, &action )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Adds <em>name</em> to the list of available menu items.  <a
href="Menu.html">Menu</a> items will be displayed in the order they are
added.</p>

<p>An optional <em>action</em> can be associated with this name and if
provided, it will be called if the item is selected.  The result of the
method will be returned, unless <em><a
href="Menu.html#attribute-i-nil_on_handled">nil_on_handled</a></em> is set
(when you would get <tt>nil</tt> instead).  In <em>shell</em> mode, a
provided block will be passed the command chosen and any details that
followed the command.  Otherwise, just the command is passed.  The
<tt>@highline</tt> variable is set to the current <a
href="HighLine.html">HighLine</a> context before the action code is called
and can thus be used for adding output and the like.</p>
            

            
            <div class="method-source-code" id="choice-source">
<pre>
<span class="ruby-comment"># File lib/highline/menu.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">choice</span>( <span class="ruby-identifier">name</span>, <span class="ruby-identifier">help</span> = <span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">action</span> )
  <span class="ruby-ivar">@items</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">name</span>, <span class="ruby-identifier">action</span>]

  <span class="ruby-ivar">@help</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>] = <span class="ruby-identifier">help</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">help</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">update_responses</span>  <span class="ruby-comment"># rebuild responses based on our settings</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- choice-source -->
            
          </div>

          

          
        </div><!-- choice-method -->

      
        <div id="choices-method" class="method-detail ">
          <a name="method-i-choices"></a>

          
          <div class="method-heading">
            <span class="method-name">choices</span><span
              class="method-args">( *names, &action )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>A shortcut for multiple calls to the sister method choice().  <b>Be
warned:</b>  An <em>action</em> set here will apply to <b>all</b> provided
<em>names</em>.  This is considered to be a feature, so you can easily
hand-off interface processing to a different chunk of code.</p>
            

            
            <div class="method-source-code" id="choices-source">
<pre>
<span class="ruby-comment"># File lib/highline/menu.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">choices</span>( *<span class="ruby-identifier">names</span>, &amp;<span class="ruby-identifier">action</span> )
  <span class="ruby-identifier">names</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-identifier">choice</span>(<span class="ruby-identifier">n</span>, &amp;<span class="ruby-identifier">action</span>) }
<span class="ruby-keyword">end</span></pre>
            </div><!-- choices-source -->
            
          </div>

          

          
        </div><!-- choices-method -->

      
        <div id="help-method" class="method-detail ">
          <a name="method-i-help"></a>

          
          <div class="method-heading">
            <span class="method-name">help</span><span
              class="method-args">( topic, help )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Used to set help for arbitrary topics.  Use the topic
<tt>&quot;help&quot;</tt> to override the default message.</p>
            

            
            <div class="method-source-code" id="help-source">
<pre>
<span class="ruby-comment"># File lib/highline/menu.rb, line 214</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">help</span>( <span class="ruby-identifier">topic</span>, <span class="ruby-identifier">help</span> )
  <span class="ruby-ivar">@help</span>[<span class="ruby-identifier">topic</span>] = <span class="ruby-identifier">help</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- help-source -->
            
          </div>

          

          
        </div><!-- help-method -->

      
        <div id="hidden-method" class="method-detail ">
          <a name="method-i-hidden"></a>

          
          <div class="method-heading">
            <span class="method-name">hidden</span><span
              class="method-args">( name, help = nil, &action )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Identical to choice(), but the item will not be listed for the user.</p>
            

            
            <div class="method-source-code" id="hidden-source">
<pre>
<span class="ruby-comment"># File lib/highline/menu.rb, line 154</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">hidden</span>( <span class="ruby-identifier">name</span>, <span class="ruby-identifier">help</span> = <span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">action</span> )
  <span class="ruby-ivar">@hidden_items</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">name</span>, <span class="ruby-identifier">action</span>]

  <span class="ruby-ivar">@help</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>] = <span class="ruby-identifier">help</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">help</span>.<span class="ruby-identifier">nil?</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- hidden-source -->
            
          </div>

          

          
        </div><!-- hidden-method -->

      
        <div id="index-3D-method" class="method-detail ">
          <a name="method-i-index-3D"></a>

          
          <div class="method-heading">
            <span class="method-name">index=</span><span
              class="method-args">( style )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Sets the indexing style for this <a href="Menu.html">Menu</a> object. 
Indexes are appended to menu items, when displayed in list form.  The
available settings are:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p><tt>:number</tt></p></td>
<td>
<p><a href="Menu.html">Menu</a> items will be indexed numerically, starting
with 1.  This is the default method of indexing.</p>
</td></tr><tr><td class="rdoc-term"><p><tt>:letter</tt></p></td>
<td>
<p>Items will be indexed alphabetically, starting with a.</p>
</td></tr><tr><td class="rdoc-term"><p><tt>:none</tt></p></td>
<td>
<p>No index will be appended to menu items.</p>
</td></tr><tr><td class="rdoc-term"><p><em>any <a href="../String.html">String</a></em></p></td>
<td>
<p>Will be used as the literal <em>index</em>.</p>
</td></tr></table>

<p>Setting the <em>index</em> to <tt>:none</tt> or a literal <a
href="../String.html">String</a> also adjusts <em><a
href="Menu.html#attribute-i-index_suffix">index_suffix</a></em> to a single
space and <em><a href="Menu.html#attribute-i-select_by">select_by</a></em>
to <tt>:name</tt>. Because of this, you should make a habit of setting the
<em>index</em> first.</p>
            

            
            <div class="method-source-code" id="index-3D-source">
<pre>
<span class="ruby-comment"># File lib/highline/menu.rb, line 175</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">index=</span>( <span class="ruby-identifier">style</span> )
  <span class="ruby-ivar">@index</span> = <span class="ruby-identifier">style</span>

  <span class="ruby-comment"># Default settings.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">==</span> <span class="ruby-value">:none</span> <span class="ruby-keyword">or</span> <span class="ruby-ivar">@index</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">String</span>)
    <span class="ruby-ivar">@index_suffix</span> = <span class="ruby-string">&quot; &quot;</span>
    <span class="ruby-ivar">@select_by</span>    = <span class="ruby-value">:name</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- index-3D-source -->
            
          </div>

          

          
        </div><!-- index-3D-method -->

      
        <div id="init_help-method" class="method-detail ">
          <a name="method-i-init_help"></a>

          
          <div class="method-heading">
            <span class="method-name">init_help</span><span
              class="method-args">( )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Initializes the help system by adding a <tt>:help</tt> choice, some action
code, and the default help listing.</p>
            

            
            <div class="method-source-code" id="init_help-source">
<pre>
<span class="ruby-comment"># File lib/highline/menu.rb, line 189</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">init_help</span>(  )
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:help</span>)

  <span class="ruby-identifier">topics</span>    = <span class="ruby-ivar">@help</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">help_help</span> = <span class="ruby-ivar">@help</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;help&quot;</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@help</span>[<span class="ruby-string">&quot;help&quot;</span>] <span class="ruby-operator">:</span>
              <span class="ruby-string">&quot;This command will display helpful messages about &quot;</span> <span class="ruby-operator">+</span>
              <span class="ruby-string">&quot;functionality, like this one.  To see the help for &quot;</span> <span class="ruby-operator">+</span>
              <span class="ruby-string">&quot;a specific topic enter:\n\thelp [TOPIC]\nTry asking &quot;</span> <span class="ruby-operator">+</span>
              <span class="ruby-string">&quot;for help on any of the following:\n\n&quot;</span> <span class="ruby-operator">+</span>
              <span class="ruby-node">&quot;&lt;%= list(#{topics.inspect}, :columns_across) %&gt;&quot;</span>
  <span class="ruby-identifier">choice</span>(<span class="ruby-value">:help</span>, <span class="ruby-identifier">help_help</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">command</span>, <span class="ruby-identifier">topic</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">strip!</span>
    <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">downcase!</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-ivar">@highline</span>.<span class="ruby-identifier">say</span>(<span class="ruby-ivar">@help</span>[<span class="ruby-string">&quot;help&quot;</span>])
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@highline</span>.<span class="ruby-identifier">say</span>(<span class="ruby-node">&quot;= #{topic}\n\n#{@help[topic]}&quot;</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- init_help-source -->
            
          </div>

          

          
        </div><!-- init_help-method -->

      
        <div id="layout-3D-method" class="method-detail ">
          <a name="method-i-layout-3D"></a>

          
          <div class="method-heading">
            <span class="method-name">layout=</span><span
              class="method-args">( new_layout )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Setting a <em>layout</em> with this method also adjusts some other
attributes of the <a href="Menu.html">Menu</a> object, to ideal defaults
for the chosen <em>layout</em>.  To account for that, you probably want to
set a <em>layout</em> first in your configuration block, if needed.</p>

<p>Accepted settings for <em>layout</em> are:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p><tt>:list</tt></p></td>
<td>
<p>The default <em>layout</em>.  The <em>header</em> if set will appear at the
top on its own line with a trailing colon.  Then the list of menu items
will follow.  Finally, the <em>prompt</em> will be used as the ask()-like
question.</p>
</td></tr><tr><td class="rdoc-term"><p><tt>:one_line</tt></p></td>
<td>
<p>A shorter <em>layout</em> that fits on one line. The <em>header</em> comes
first followed by a colon and spaces, then the <em>prompt</em> with menu
items between trailing parenthesis.</p>
</td></tr><tr><td class="rdoc-term"><p><tt>:menu_only</tt></p></td>
<td>
<p>Just the menu items, followed up by a likely short <em>prompt</em>.</p>
</td></tr><tr><td class="rdoc-term"><p><em>any ERb <a href="../String.html">String</a></em></p></td>
<td>
<p>Will be taken as the literal <em>layout</em>.  This <a
href="../String.html">String</a> can access <tt>@header</tt>,
<tt>@menu</tt> and <tt>@prompt</tt>, but is otherwise evaluated in the
typical <a href="HighLine.html">HighLine</a> context, to provide access to
utilities like HighLine.list() primarily.</p>
</td></tr></table>

<p>If set to either <tt>:one_line</tt>, or <tt>:menu_only</tt>, <em>index</em>
will default to <tt>:none</tt> and <em>flow</em> will default to
<tt>:inline</tt>.</p>
            

            
            <div class="method-source-code" id="layout-3D-source">
<pre>
<span class="ruby-comment"># File lib/highline/menu.rb, line 248</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">layout=</span>( <span class="ruby-identifier">new_layout</span> )
  <span class="ruby-ivar">@layout</span> = <span class="ruby-identifier">new_layout</span>

  <span class="ruby-comment"># Default settings.</span>
  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@layout</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:one_line</span>, <span class="ruby-value">:menu_only</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">index</span> = <span class="ruby-value">:none</span>
    <span class="ruby-ivar">@flow</span>  = <span class="ruby-value">:inline</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- layout-3D-source -->
            
          </div>

          

          
        </div><!-- layout-3D-method -->

      
        <div id="options-method" class="method-detail ">
          <a name="method-i-options"></a>

          
          <div class="method-heading">
            <span class="method-name">options</span><span
              class="method-args">( )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>This method returns all possible options for auto-completion, based on the
settings of <em>index</em> and <em><a
href="Menu.html#attribute-i-select_by">select_by</a></em>.</p>
            

            
            <div class="method-source-code" id="options-source">
<pre>
<span class="ruby-comment"># File lib/highline/menu.rb, line 263</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">options</span>(  )
  <span class="ruby-comment"># add in any hidden menu commands</span>
  <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-ivar">@hidden_items</span>)

  <span class="ruby-identifier">by_index</span> = <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">==</span> <span class="ruby-value">:letter</span>
    <span class="ruby-identifier">l_index</span> = <span class="ruby-string">&quot;`&quot;</span>
    <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-node">&quot;#{l_index.succ!}&quot;</span> }
  <span class="ruby-keyword">else</span>
    (<span class="ruby-value">1</span> <span class="ruby-operator">..</span> <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">size</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-constant">String</span>(<span class="ruby-identifier">s</span>) }
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">by_name</span> = <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">first</span> }

  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@select_by</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:index</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">by_index</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:name</span>
    <span class="ruby-identifier">by_name</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">by_index</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">by_name</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-comment"># make sure the hidden items are removed, before we return</span>
  <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-ivar">@items</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@hidden_items</span>.<span class="ruby-identifier">size</span>, <span class="ruby-ivar">@hidden_items</span>.<span class="ruby-identifier">size</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- options-source -->
            
          </div>

          

          
        </div><!-- options-method -->

      
        <div id="select-method" class="method-detail ">
          <a name="method-i-select"></a>

          
          <div class="method-heading">
            <span class="method-name">select</span><span
              class="method-args">( highline_context, selection, details = nil )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>This method processes the auto-completed user selection, based on the rules
for this <a href="Menu.html">Menu</a> object.  If an action was provided
for the selection, it will be executed as described in <a
href="Menu.html#method-i-choice">Menu.choice()</a>.</p>
            

            
            <div class="method-source-code" id="select-source">
<pre>
<span class="ruby-comment"># File lib/highline/menu.rb, line 293</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">select</span>( <span class="ruby-identifier">highline_context</span>, <span class="ruby-identifier">selection</span>, <span class="ruby-identifier">details</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-comment"># add in any hidden menu commands</span>
  <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-ivar">@hidden_items</span>)

  <span class="ruby-comment"># Find the selected action.</span>
  <span class="ruby-identifier">name</span>, <span class="ruby-identifier">action</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">selection</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^\d+$/</span>
    <span class="ruby-ivar">@items</span>[<span class="ruby-identifier">selection</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">l_index</span> = <span class="ruby-string">&quot;`&quot;</span>
    <span class="ruby-identifier">index</span> = <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-node">&quot;#{l_index.succ!}&quot;</span> }.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">selection</span>)
    <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">selection</span> } <span class="ruby-keyword">or</span> <span class="ruby-ivar">@items</span>[<span class="ruby-identifier">index</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Run or return it.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">action</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-ivar">@highline</span> = <span class="ruby-identifier">highline_context</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@shell</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">action</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">details</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">action</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@nil_on_handled</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">result</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">action</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">name</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-comment"># make sure the hidden items are removed, before we return</span>
  <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-ivar">@items</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@hidden_items</span>.<span class="ruby-identifier">size</span>, <span class="ruby-ivar">@hidden_items</span>.<span class="ruby-identifier">size</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- select-source -->
            
          </div>

          

          
        </div><!-- select-method -->

      
        <div id="to_ary-method" class="method-detail ">
          <a name="method-i-to_ary"></a>

          
          <div class="method-heading">
            <span class="method-name">to_ary</span><span
              class="method-args">( )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Allows <a href="Menu.html">Menu</a> objects to pass as Arrays, for use with
HighLine.list(). This method returns all menu items to be displayed,
complete with indexes.</p>
            

            
            <div class="method-source-code" id="to_ary-source">
<pre>
<span class="ruby-comment"># File lib/highline/menu.rb, line 330</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_ary</span>(  )
  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@index</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:number</span>
    <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{@items.index(c) + 1}#{@index_suffix}#{c.first}&quot;</span> }
  <span class="ruby-keyword">when</span> <span class="ruby-value">:letter</span>
    <span class="ruby-identifier">l_index</span> = <span class="ruby-string">&quot;`&quot;</span>
    <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{l_index.succ!}#{@index_suffix}#{c.first}&quot;</span> }
  <span class="ruby-keyword">when</span> <span class="ruby-value">:none</span>
    <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{c.first}&quot;</span> }
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{index}#{@index_suffix}#{c.first}&quot;</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_ary-source -->
            
          </div>

          

          
        </div><!-- to_ary-method -->

      
        <div id="to_str-method" class="method-detail ">
          <a name="method-i-to_str"></a>

          
          <div class="method-heading">
            <span class="method-name">to_str</span><span
              class="method-args">( )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Allows <a href="Menu.html">Menu</a> to behave as a <a
href="../String.html">String</a>, just like <a
href="Question.html">Question</a>.  Returns the <em>layout</em> to be
rendered, which is used by HighLine.say().</p>
            

            
            <div class="method-source-code" id="to_str-source">
<pre>
<span class="ruby-comment"># File lib/highline/menu.rb, line 348</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_str</span>(  )
  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@layout</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:list</span>
    <span class="ruby-string">'&lt;%= if @header.nil? then '</span><span class="ruby-string">' else &quot;#{@header}:\n&quot; end %&gt;'</span> <span class="ruby-operator">+</span>
    <span class="ruby-node">&quot;&lt;%= list( @menu, #{@flow.inspect},
                      #{@list_option.inspect} ) %&gt;&quot;</span> <span class="ruby-operator">+</span>
    <span class="ruby-string">&quot;&lt;%= @prompt %&gt;&quot;</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:one_line</span>
    <span class="ruby-string">'&lt;%= if @header.nil? then '</span><span class="ruby-string">' else &quot;#{@header}:  &quot; end %&gt;'</span> <span class="ruby-operator">+</span>
    <span class="ruby-string">&quot;&lt;%= @prompt %&gt;&quot;</span> <span class="ruby-operator">+</span>
    <span class="ruby-node">&quot;(&lt;%= list( @menu, #{@flow.inspect},
                       #{@list_option.inspect} ) %&gt;)&quot;</span> <span class="ruby-operator">+</span>
    <span class="ruby-string">&quot;&lt;%= @prompt[/\s*$/] %&gt;&quot;</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:menu_only</span>
    <span class="ruby-node">&quot;&lt;%= list( @menu, #{@flow.inspect},
                      #{@list_option.inspect} ) %&gt;&lt;%= @prompt %&gt;&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@layout</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_str-source -->
            
          </div>

          

          
        </div><!-- to_str-method -->

      
        <div id="update_responses-method" class="method-detail ">
          <a name="method-i-update_responses"></a>

          
          <div class="method-heading">
            <span class="method-name">update_responses</span><span
              class="method-args">( )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>This method will update the intelligent responses to account for <a
href="Menu.html">Menu</a> specific differences.  This overrides the work
done by <a
href="Question.html#method-i-build_responses">Question.build_responses()</a>.</p>
            

            
            <div class="method-source-code" id="update_responses-source">
<pre>
<span class="ruby-comment"># File lib/highline/menu.rb, line 374</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_responses</span>(  )
  <span class="ruby-identifier">append_default</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">default</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-ivar">@responses</span> = <span class="ruby-ivar">@responses</span>.<span class="ruby-identifier">merge</span>(
                 <span class="ruby-value">:ambiguous_completion</span> =<span class="ruby-operator">&gt;</span>
                   <span class="ruby-string">&quot;Ambiguous choice.  &quot;</span> <span class="ruby-operator">+</span>
                   <span class="ruby-node">&quot;Please choose one of #{options.inspect}.&quot;</span>,
                 <span class="ruby-value">:ask_on_error</span>         =<span class="ruby-operator">&gt;</span>
                   <span class="ruby-string">&quot;?  &quot;</span>,
                 <span class="ruby-value">:invalid_type</span>         =<span class="ruby-operator">&gt;</span>
                   <span class="ruby-node">&quot;You must enter a valid #{options}.&quot;</span>,
                 <span class="ruby-value">:no_completion</span>        =<span class="ruby-operator">&gt;</span>
                   <span class="ruby-string">&quot;You must choose one of &quot;</span> <span class="ruby-operator">+</span>
                   <span class="ruby-node">&quot;#{options.inspect}.&quot;</span>,
                 <span class="ruby-value">:not_in_range</span>         =<span class="ruby-operator">&gt;</span>
                   <span class="ruby-string">&quot;Your answer isn't within the expected range &quot;</span> <span class="ruby-operator">+</span>
                   <span class="ruby-node">&quot;(#{expected_range}).&quot;</span>,
                 <span class="ruby-value">:mismatch</span>             =<span class="ruby-operator">&gt;</span>
                   <span class="ruby-string">&quot;Your entries didn't match.&quot;</span>,
                 <span class="ruby-value">:not_valid</span>            =<span class="ruby-operator">&gt;</span>
                   <span class="ruby-string">&quot;Your answer isn't valid (must match &quot;</span> <span class="ruby-operator">+</span>
                   <span class="ruby-node">&quot;#{@validate.inspect}).&quot;</span>
               )
<span class="ruby-keyword">end</span></pre>
            </div><!-- update_responses-source -->
            
          </div>

          

          
        </div><!-- update_responses-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

