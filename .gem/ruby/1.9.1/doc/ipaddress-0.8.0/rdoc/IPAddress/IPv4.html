<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: IPAddress::IPv4</title>

  <link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../lib/ipaddress/ipv4_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/ipaddress/ipv4.rb">lib/ipaddress/ipv4.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="../Object.html">Object</a></p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-extract">::extract</a></li>
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-c-parse_classful">::parse_classful</a></li>
          
          <li><a href="#method-c-parse_data">::parse_data</a></li>
          
          <li><a href="#method-c-parse_u32">::parse_u32</a></li>
          
          <li><a href="#method-c-summarize">::summarize</a></li>
          
          <li><a href="#method-i-2B">#+</a></li>
          
          <li><a href="#method-i-2D">#-</a></li>
          
          <li><a href="#method-i-2F">#/</a></li>
          
          <li><a href="#method-i-3C-3D-3E">#<=></a></li>
          
          <li><a href="#method-i-5B-5D">#[]</a></li>
          
          <li><a href="#method-i-a-3F">#a?</a></li>
          
          <li><a href="#method-i-address">#address</a></li>
          
          <li><a href="#method-i-arpa">#arpa</a></li>
          
          <li><a href="#method-i-b-3F">#b?</a></li>
          
          <li><a href="#method-i-bits">#bits</a></li>
          
          <li><a href="#method-i-broadcast">#broadcast</a></li>
          
          <li><a href="#method-i-broadcast_u32">#broadcast_u32</a></li>
          
          <li><a href="#method-i-c-3F">#c?</a></li>
          
          <li><a href="#method-i-data">#data</a></li>
          
          <li><a href="#method-i-each">#each</a></li>
          
          <li><a href="#method-i-each_host">#each_host</a></li>
          
          <li><a href="#method-i-first">#first</a></li>
          
          <li><a href="#method-i-hosts">#hosts</a></li>
          
          <li><a href="#method-i-include-3F">#include?</a></li>
          
          <li><a href="#method-i-include_all-3F">#include_all?</a></li>
          
          <li><a href="#method-i-last">#last</a></li>
          
          <li><a href="#method-i-netmask">#netmask</a></li>
          
          <li><a href="#method-i-netmask-3D">#netmask=</a></li>
          
          <li><a href="#method-i-network">#network</a></li>
          
          <li><a href="#method-i-network-3F">#network?</a></li>
          
          <li><a href="#method-i-network_u32">#network_u32</a></li>
          
          <li><a href="#method-i-octet">#octet</a></li>
          
          <li><a href="#method-i-octets">#octets</a></li>
          
          <li><a href="#method-i-prefix">#prefix</a></li>
          
          <li><a href="#method-i-prefix-3D">#prefix=</a></li>
          
          <li><a href="#method-i-private-3F">#private?</a></li>
          
          <li><a href="#method-i-reverse">#reverse</a></li>
          
          <li><a href="#method-i-size">#size</a></li>
          
          <li><a href="#method-i-split">#split</a></li>
          
          <li><a href="#method-i-subnet">#subnet</a></li>
          
          <li><a href="#method-i-supernet">#supernet</a></li>
          
          <li><a href="#method-i-to_i">#to_i</a></li>
          
          <li><a href="#method-i-to_ipv6">#to_ipv6</a></li>
          
          <li><a href="#method-i-to_s">#to_s</a></li>
          
          <li><a href="#method-i-to_string">#to_string</a></li>
          
          <li><a href="#method-i-to_u32">#to_u32</a></li>
          
          <li><a href="#method-i-u32">#u32</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><a class="include" href="../IPAddress.html">IPAddress</a></li>
        
        
        
          <li><span class="include">Enumerable</span></li>
        
        
        
          <li><span class="include">Comparable</span></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="../README_rdoc.html">README.rdoc</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../IPAddress.html">IPAddress</a></li>
        
          <li><a href="../IPAddress/IPAddress.html">IPAddress::IPAddress</a></li>
        
          <li><a href="../IPAddress/IPAddress/IPAddress.html">IPAddress::IPAddress::IPAddress</a></li>
        
          <li><a href="../IPAddress/IPAddress/IPAddress/IPv6.html">IPAddress::IPAddress::IPAddress::IPv6</a></li>
        
          <li><a href="../IPAddress/IPAddress/IPAddress/IPv6/Loopback.html">IPAddress::IPAddress::IPAddress::IPv6::Loopback</a></li>
        
          <li><a href="../IPAddress/IPAddress/IPAddress/IPv6/Mapped.html">IPAddress::IPAddress::IPAddress::IPv6::Mapped</a></li>
        
          <li><a href="../IPAddress/IPAddress/IPAddress/IPv6/Unspecified.html">IPAddress::IPAddress::IPAddress::IPv6::Unspecified</a></li>
        
          <li><a href="../IPAddress/IPv4.html">IPAddress::IPv4</a></li>
        
          <li><a href="../IPAddress/IPv6.html">IPAddress::IPv6</a></li>
        
          <li><a href="../IPAddress/Prefix.html">IPAddress::Prefix</a></li>
        
          <li><a href="../IPAddress/Prefix128.html">IPAddress::Prefix128</a></li>
        
          <li><a href="../IPAddress/Prefix32.html">IPAddress::Prefix32</a></li>
        
          <li><a href="../Object.html">Object</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">IPAddress::IPv4</h1>

    <div id="description" class="description">
      
<h1>Name</h1>

<p><a href="IPv4.html">IPAddress::IPv4</a> - IP version 4 address manipulation
library</p>

<h1>Synopsis</h1>

<pre>require 'ipaddress'</pre>

<h1>Description</h1>

<p>Class <a href="IPv4.html">IPAddress::IPv4</a> is used to handle <a
href="IPv4.html">IPv4</a> type addresses.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="CLASSFUL">CLASSFUL</a></dt>
          
          <dd class="description"><p>This Hash contains the prefix values for Classful networks</p>

<p>Note that classes C, D and E will all have a default  prefix of /24 or
255.255.255.0</p></dd>
          
        
          <dt><a name="REGEXP">REGEXP</a></dt>
          
          <dd class="description"><p>Regular expression to match an <a href="IPv4.html">IPv4</a> address</p></dd>
          
        
        </dl>
      </div>
      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="extract-method" class="method-detail ">
          <a name="method-c-extract"></a>

          
          <div class="method-heading">
            <span class="method-name">extract</span><span
              class="method-args">(str)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Extract an <a href="IPv4.html">IPv4</a> address from a string and  returns
a new object</p>

<p>Example:</p>

<pre>str = &quot;foobar172.16.10.1barbaz&quot;
ip = IPAddress::IPv4::extract str

ip.to_s
  #=&gt; &quot;172.16.10.1&quot;</pre>
            

            
            <div class="method-source-code" id="extract-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 846</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">extract</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span> <span class="ruby-constant">REGEXP</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">str</span>).<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- extract-source -->
            
          </div>

          

          
        </div><!-- extract-method -->

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(str)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates a new <a href="IPv4.html">IPv4</a> address object.</p>

<p>An <a href="IPv4.html">IPv4</a> address can be expressed in any of the
following forms:</p>
<ul><li>
<p>“10.1.1.1/24”: ip <tt>address</tt> and <tt>prefix</tt>. This is the common
and</p>
</li></ul>

<p>suggested way to create an object                  .</p>
<ul><li>
<p>“10.1.1.1/255.255.255.0”: ip <tt>address</tt> and <tt>netmask</tt>.
Although</p>
</li></ul>

<p>convenient sometimes, this format is less clear than the previous one.</p>
<ul><li>
<p>“10.1.1.1”: if the address alone is specified, the prefix will be</p>
</li></ul>

<p>set as default 32, also known as the host prefix</p>

<p>Examples:</p>

<pre># These two are the same
ip = IPAddress::IPv4.new(&quot;10.0.0.1/24&quot;)
ip = IPAddress(&quot;10.0.0.1/24&quot;)

# These two are the same
IPAddress::IPv4.new &quot;10.0.0.1/8&quot;
IPAddress::IPv4.new &quot;10.0.0.1/255.0.0.0&quot;</pre>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 63</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">ip</span>, <span class="ruby-identifier">netmask</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;/&quot;</span>)
  
  <span class="ruby-comment"># Check the ip and remove white space</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">IPAddress</span>.<span class="ruby-identifier">valid_ipv4?</span>(<span class="ruby-identifier">ip</span>)
    <span class="ruby-ivar">@address</span> = <span class="ruby-identifier">ip</span>.<span class="ruby-identifier">strip</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Invalid IP #{ip.inspect}&quot;</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-comment"># Check the netmask</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">netmask</span>  <span class="ruby-comment"># netmask is defined</span>
    <span class="ruby-identifier">netmask</span>.<span class="ruby-identifier">strip!</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">netmask</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^\d{1,2}$/</span>  <span class="ruby-comment"># netmask in cidr format </span>
      <span class="ruby-ivar">@prefix</span> = <span class="ruby-constant">Prefix32</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">netmask</span>.<span class="ruby-identifier">to_i</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-constant">IPAddress</span>.<span class="ruby-identifier">valid_ipv4_netmask?</span>(<span class="ruby-identifier">netmask</span>)  <span class="ruby-comment"># netmask in IP format</span>
      <span class="ruby-ivar">@prefix</span> = <span class="ruby-constant">Prefix32</span>.<span class="ruby-identifier">parse_netmask</span>(<span class="ruby-identifier">netmask</span>)
    <span class="ruby-keyword">else</span>  <span class="ruby-comment"># invalid netmask</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Invalid netmask #{netmask}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>  <span class="ruby-comment"># netmask is nil, reverting to defaul classful mask</span>
    <span class="ruby-ivar">@prefix</span> = <span class="ruby-constant">Prefix32</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">32</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Array formed with the IP octets</span>
  <span class="ruby-ivar">@octets</span> = <span class="ruby-ivar">@address</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;.&quot;</span>).<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">to_i</span>}
  <span class="ruby-comment"># 32 bits interger containing the address</span>
  <span class="ruby-ivar">@u32</span> = (<span class="ruby-ivar">@octets</span>[<span class="ruby-value">0</span>]<span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">24</span>) <span class="ruby-operator">+</span> (<span class="ruby-ivar">@octets</span>[<span class="ruby-value">1</span>]<span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span>) <span class="ruby-operator">+</span> (<span class="ruby-ivar">@octets</span>[<span class="ruby-value">2</span>]<span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span>) <span class="ruby-operator">+</span> (<span class="ruby-ivar">@octets</span>[<span class="ruby-value">3</span>])
  
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
        <div id="parse_classful-method" class="method-detail ">
          <a name="method-c-parse_classful"></a>

          
          <div class="method-heading">
            <span class="method-name">parse_classful</span><span
              class="method-args">(ip)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates a new <a href="IPv4.html">IPv4</a> address object by parsing the 
address in a classful way.</p>

<p>Classful addresses have a fixed netmask based on the  class they belong to:</p>
<ul><li>
<p>Class A, from 0.0.0.0 to 127.255.255.255</p>
</li><li>
<p>Class B, from 128.0.0.0 to 191.255.255.255</p>
</li><li>
<p>Class C, D and E, from 192.0.0.0 to 255.255.255.254</p>
</li></ul>

<p>Example:</p>

<pre>ip = IPAddress::IPv4.parse_classful &quot;10.0.0.1&quot;

ip.netmask 
  #=&gt; &quot;255.0.0.0&quot;
ip.a?
  #=&gt; true</pre>

<p>Note that classes C, D and E will all have a default prefix of /24 or
255.255.255.0</p>
            

            
            <div class="method-source-code" id="parse_classful-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 957</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">parse_classful</span>(<span class="ruby-identifier">ip</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">IPAddress</span>.<span class="ruby-identifier">valid_ipv4?</span>(<span class="ruby-identifier">ip</span>)
    <span class="ruby-identifier">address</span> = <span class="ruby-identifier">ip</span>.<span class="ruby-identifier">strip</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Invalid IP #{ip.inspect}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">prefix</span> = <span class="ruby-constant">CLASSFUL</span>.<span class="ruby-identifier">find</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">h</span>,<span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h</span> <span class="ruby-operator">===</span> (<span class="ruby-string">&quot;%.8b&quot;</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">address</span>.<span class="ruby-identifier">to_i</span>)}.<span class="ruby-identifier">last</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span> <span class="ruby-node">&quot;#{address}/#{prefix}&quot;</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- parse_classful-source -->
            
          </div>

          

          
        </div><!-- parse_classful-method -->

      
        <div id="parse_data-method" class="method-detail ">
          <a name="method-c-parse_data"></a>

          
          <div class="method-heading">
            <span class="method-name">parse_data</span><span
              class="method-args">(str, prefix=32)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates a new <a href="IPv4.html">IPv4</a> object from binary data, like
the one you get from a network stream.</p>

<p>For example, on a network stream the IP 172.16.0.1 is represented with the
binary “254020n001”.</p>

<pre>ip = IPAddress::IPv4::parse_data &quot;\254\020\n\001&quot;
ip.prefix = 24

ip.to_string
  #=&gt; &quot;172.16.10.1/24&quot;</pre>
            

            
            <div class="method-source-code" id="parse_data-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 830</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">parse_data</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">prefix</span>=<span class="ruby-value">32</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">str</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-string">&quot;C4&quot;</span>).<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;.&quot;</span>)<span class="ruby-operator">+</span><span class="ruby-node">&quot;/#{prefix}&quot;</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- parse_data-source -->
            
          </div>

          

          
        </div><!-- parse_data-method -->

      
        <div id="parse_u32-method" class="method-detail ">
          <a name="method-c-parse_u32"></a>

          
          <div class="method-heading">
            <span class="method-name">parse_u32</span><span
              class="method-args">(u32, prefix=32)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates a new <a href="IPv4.html">IPv4</a> object from an unsigned 32bits
integer.</p>

<pre>ip = IPAddress::IPv4::parse_u32(167772160)

ip.prefix = 8
ip.to_string
  #=&gt; &quot;10.0.0.0/8&quot;</pre>

<p>The <tt>prefix</tt> parameter is optional:</p>

<pre>ip = IPAddress::IPv4::parse_u32(167772160, 8)

ip.to_string
  #=&gt; &quot;10.0.0.0/8&quot;</pre>
            

            
            <div class="method-source-code" id="parse_u32-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 813</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">parse_u32</span>(<span class="ruby-identifier">u32</span>, <span class="ruby-identifier">prefix</span>=<span class="ruby-value">32</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>([<span class="ruby-identifier">u32</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-string">&quot;N&quot;</span>).<span class="ruby-identifier">unpack</span>(<span class="ruby-string">&quot;C4&quot;</span>).<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;.&quot;</span>)<span class="ruby-operator">+</span><span class="ruby-node">&quot;/#{prefix}&quot;</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- parse_u32-source -->
            
          </div>

          

          
        </div><!-- parse_u32-method -->

      
        <div id="summarize-method" class="method-detail ">
          <a name="method-c-summarize"></a>

          
          <div class="method-heading">
            <span class="method-name">summarize</span><span
              class="method-args">(*args)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Summarization (or aggregation) is the process when two or more networks are
taken together to check if a supernet, including all and only these
networks, exists. If it exists then this supernet is called the summarized
(or aggregated) network.</p>

<p>It is very important to understand that summarization can only occur if
there are no holes in the aggregated network, or, in other words, if the
given networks fill completely the address space of the supernet. So the
two rules are:</p>

<p>1) The aggregate network must contain <tt>all</tt> the IP addresses of the</p>

<pre>original networks;</pre>

<p>2) The aggregate network must contain <tt>only</tt> the IP addresses of the</p>

<pre>original networks;</pre>

<p>A few examples will help clarify the above. Let’s consider for instance the
following two networks:</p>

<pre>ip1 = IPAddress(&quot;172.16.10.0/24&quot;)
ip2 = IPAddress(&quot;172.16.11.0/24&quot;)</pre>

<p>These two networks can be expressed using only one IP address network if we
change the prefix. Let Ruby do the work:</p>

<pre>IPAddress::IPv4::summarize(ip1,ip2).to_s
  #=&gt; &quot;172.16.10.0/23&quot;</pre>

<p>We note how the network “172.16.10.0/23” includes all the addresses
specified in the above networks, and (more important) includes ONLY those
addresses.</p>

<p>If we summarized <tt>ip1</tt> and <tt>ip2</tt> with the following network:</p>

<pre>&quot;172.16.0.0/16&quot;</pre>

<p>we would have satisfied rule #1 above, but not rule #2. So “172.16.0.0/16”
is not an aggregate network for <tt>ip1</tt> and <tt>ip2</tt>.</p>

<p>If it’s not possible to compute a single aggregated network for all the
original networks, the method returns an array with all the aggregate
networks found. For example, the following four networks can be aggregated
in a single /22:</p>

<pre>ip1 = IPAddress(&quot;10.0.0.1/24&quot;)
ip2 = IPAddress(&quot;10.0.1.1/24&quot;)
ip3 = IPAddress(&quot;10.0.2.1/24&quot;)
ip4 = IPAddress(&quot;10.0.3.1/24&quot;)

IPAddress::IPv4::summarize(ip1,ip2,ip3,ip4).to_string
  #=&gt; &quot;10.0.0.0/22&quot;,</pre>

<p>But the following networks can’t be summarized in a single network:</p>

<pre>ip1 = IPAddress(&quot;10.0.1.1/24&quot;)
ip2 = IPAddress(&quot;10.0.2.1/24&quot;)
ip3 = IPAddress(&quot;10.0.3.1/24&quot;)
ip4 = IPAddress(&quot;10.0.4.1/24&quot;)

IPAddress::IPv4::summarize(ip1,ip2,ip3,ip4).map{|i| i.to_string}
  #=&gt; [&quot;10.0.1.0/24&quot;,&quot;10.0.2.0/23&quot;,&quot;10.0.4.0/24&quot;]</pre>
            

            
            <div class="method-source-code" id="summarize-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 912</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">summarize</span>(*<span class="ruby-identifier">args</span>)
  <span class="ruby-comment"># one network? no need to summarize</span>
  <span class="ruby-keyword">return</span> [<span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">network</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
  
  <span class="ruby-identifier">i</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">ip</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ip</span>.<span class="ruby-identifier">network</span>}
  <span class="ruby-keyword">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>
    <span class="ruby-identifier">sum</span> = <span class="ruby-identifier">result</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">result</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>]
    <span class="ruby-identifier">result</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">..</span><span class="ruby-identifier">i</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>] = <span class="ruby-identifier">sum</span>.<span class="ruby-identifier">first</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">sum</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-identifier">result</span>.<span class="ruby-identifier">flatten!</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-comment"># nothing more to summarize</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-comment"># keep on summarizing</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">summarize</span>(*<span class="ruby-identifier">result</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- summarize-source -->
            
          </div>

          

          
        </div><!-- summarize-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="2B-method" class="method-detail ">
          <a name="method-i-2B"></a>

          
          <div class="method-heading">
            <span class="method-name">+</span><span
              class="method-args">(oth)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a new <a href="IPv4.html">IPv4</a> object which is the result  of
the summarization, if possible, of the two  objects</p>

<p>Example:</p>

<pre>ip1 = IPAddress(&quot;172.16.10.1/24&quot;)
ip2 = IPAddress(&quot;172.16.11.2/24&quot;)

p (ip1 + ip2).map {|i| i.to_string}
  #=&gt; [&quot;172.16.10.0/23&quot;]</pre>

<p>If the networks are not contiguous, returns the two network numbers from
the objects</p>

<pre>ip1 = IPAddress(&quot;10.0.0.1/24&quot;)
ip2 = IPAddress(&quot;10.0.2.1/24&quot;)

p (ip1 + ip2).map {|i| i.to_string}
  #=&gt; [&quot;10.0.0.0/24&quot;,&quot;10.0.2.0/24&quot;]</pre>
            

            
            <div class="method-source-code" id="2B-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 729</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">+</span>(<span class="ruby-identifier">oth</span>)
  <span class="ruby-identifier">aggregate</span>(*[<span class="ruby-keyword">self</span>,<span class="ruby-identifier">oth</span>].<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">network</span>})
<span class="ruby-keyword">end</span></pre>
            </div><!-- 2B-source -->
            
          </div>

          

          
        </div><!-- 2B-method -->

      
        <div id="2D-method" class="method-detail ">
          <a name="method-i-2D"></a>

          
          <div class="method-heading">
            <span class="method-name">-</span><span
              class="method-args">(oth)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the difference between two IP addresses in unsigned int 32 bits
format</p>

<p>Example:</p>

<pre>ip1 = IPAddress(&quot;172.16.10.0/24&quot;)
ip2 = IPAddress(&quot;172.16.11.0/24&quot;)

puts ip1 - ip2
  #=&gt; 256</pre>
            

            
            <div class="method-source-code" id="2D-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 703</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">-</span>(<span class="ruby-identifier">oth</span>)
  <span class="ruby-keyword">return</span> (<span class="ruby-identifier">to_u32</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">oth</span>.<span class="ruby-identifier">to_u32</span>).<span class="ruby-identifier">abs</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- 2D-source -->
            
          </div>

          

          
        </div><!-- 2D-method -->

      
        <div id="2F-method" class="method-detail method-alias">
          <a name="method-i-2F"></a>

          
          <div class="method-heading">
            <span class="method-name">/</span><span
              class="method-args">(subnets=2)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="IPv4.html#method-i-split">split</a>
          </div>
          
        </div><!-- 2F-method -->

      
        <div id="3C-3D-3E-method" class="method-detail ">
          <a name="method-i-3C-3D-3E"></a>

          
          <div class="method-heading">
            <span class="method-name">&lt;=&gt;</span><span
              class="method-args">(oth)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Spaceship operator to compare <a href="IPv4.html">IPv4</a> objects</p>

<p>Comparing <a href="IPv4.html">IPv4</a> addresses is useful to ordinate them
into lists that match our intuitive  perception of ordered IP addresses.</p>

<p>The first comparison criteria is the u32 value. For example, 10.100.100.1
will be considered  to be less than 172.16.0.1, because, in a ordered list,
we expect 10.100.100.1 to come before 172.16.0.1.</p>

<p>The second criteria, in case two <a href="IPv4.html">IPv4</a> objects  have
identical addresses, is the prefix. An higher prefix will be considered
greater than a lower prefix. This is because we expect to see
10.100.100.0/24 come before 10.100.100.0/25.</p>

<p>Example:</p>

<pre>ip1 = IPAddress &quot;10.100.100.1/8&quot;
ip2 = IPAddress &quot;172.16.0.1/16&quot;
ip3 = IPAddress &quot;10.100.100.1/16&quot;

ip1 &lt; ip2
  #=&gt; true
ip1 &gt; ip3
  #=&gt; false

[ip1,ip2,ip3].sort.map{|i| i.to_string}
  #=&gt; [&quot;10.100.100.1/8&quot;,&quot;10.100.100.1/16&quot;,&quot;172.16.0.1/16&quot;]</pre>
            

            
            <div class="method-source-code" id="3C-3D-3E-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 460</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;=&gt;</span>(<span class="ruby-identifier">oth</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">prefix</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">oth</span>.<span class="ruby-identifier">prefix</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">to_u32</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">oth</span>.<span class="ruby-identifier">to_u32</span>  
  <span class="ruby-identifier">to_u32</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">oth</span>.<span class="ruby-identifier">to_u32</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- 3C-3D-3E-source -->
            
          </div>

          

          
        </div><!-- 3C-3D-3E-method -->

      
        <div id="5B-5D-method" class="method-detail ">
          <a name="method-i-5B-5D"></a>

          
          <div class="method-heading">
            <span class="method-name">[]</span><span
              class="method-args">(index)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the octet specified by index</p>

<pre>ip = IPAddress(&quot;172.16.100.50/24&quot;)

ip[0]
  #=&gt; 172
ip[1]
  #=&gt; 16
ip[2]
  #=&gt; 100
ip[3]
  #=&gt; 50</pre>
            

            
            <div class="method-source-code" id="5B-5D-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 270</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">index</span>)
  <span class="ruby-ivar">@octets</span>[<span class="ruby-identifier">index</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- 5B-5D-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="IPv4.html#method-i-octet">octet</a>
          </div>
          

          
        </div><!-- 5B-5D-method -->

      
        <div id="a-3F-method" class="method-detail ">
          <a name="method-i-a-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">a?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Checks whether the ip address belongs to a  RFC 791 CLASS A network, no
matter what the subnet mask is.</p>

<p>Example:</p>

<pre>ip = IPAddress(&quot;10.0.0.1/24&quot;)

ip.a?
  #=&gt; true</pre>
            

            
            <div class="method-source-code" id="a-3F-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 745</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">a?</span>
  <span class="ruby-constant">CLASSFUL</span>.<span class="ruby-identifier">key</span>(<span class="ruby-value">8</span>) <span class="ruby-operator">===</span> <span class="ruby-identifier">bits</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- a-3F-source -->
            
          </div>

          

          
        </div><!-- a-3F-method -->

      
        <div id="address-method" class="method-detail ">
          <a name="method-i-address"></a>

          
          <div class="method-heading">
            <span class="method-name">address</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the address portion of the <a href="IPv4.html">IPv4</a> object as a
string.</p>

<pre>ip = IPAddress(&quot;172.16.100.4/22&quot;)

ip.address
  #=&gt; &quot;172.16.100.4&quot;</pre>
            

            
            <div class="method-source-code" id="address-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 103</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">address</span>
  <span class="ruby-ivar">@address</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- address-source -->
            
          </div>

          

          
        </div><!-- address-method -->

      
        <div id="arpa-method" class="method-detail method-alias">
          <a name="method-i-arpa"></a>

          
          <div class="method-heading">
            <span class="method-name">arpa</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="IPv4.html#method-i-reverse">reverse</a>
          </div>
          
        </div><!-- arpa-method -->

      
        <div id="b-3F-method" class="method-detail ">
          <a name="method-i-b-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">b?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Checks whether the ip address belongs to a RFC 791 CLASS B network, no
matter what the subnet mask is.</p>

<p>Example:</p>

<pre>ip = IPAddress(&quot;172.16.10.1/24&quot;)

ip.b?
  #=&gt; true</pre>
            

            
            <div class="method-source-code" id="b-3F-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 761</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">b?</span>
  <span class="ruby-constant">CLASSFUL</span>.<span class="ruby-identifier">key</span>(<span class="ruby-value">16</span>) <span class="ruby-operator">===</span> <span class="ruby-identifier">bits</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- b-3F-source -->
            
          </div>

          

          
        </div><!-- b-3F-method -->

      
        <div id="bits-method" class="method-detail ">
          <a name="method-i-bits"></a>

          
          <div class="method-heading">
            <span class="method-name">bits</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the address portion of an IP in binary format, as a string
containing a sequence of 0 and 1</p>

<pre>ip = IPAddress(&quot;127.0.0.1&quot;)

ip.bits
  #=&gt; &quot;01111111000000000000000000000001&quot;</pre>
            

            
            <div class="method-source-code" id="bits-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 284</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">bits</span>
  <span class="ruby-identifier">data</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-string">&quot;B*&quot;</span>).<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- bits-source -->
            
          </div>

          

          
        </div><!-- bits-method -->

      
        <div id="broadcast-method" class="method-detail ">
          <a name="method-i-broadcast"></a>

          
          <div class="method-heading">
            <span class="method-name">broadcast</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the broadcast address for the given IP.</p>

<pre>ip = IPAddress(&quot;172.16.10.64/24&quot;)

ip.broadcast.to_s
  #=&gt; &quot;172.16.10.255&quot;</pre>
            

            
            <div class="method-source-code" id="broadcast-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 296</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">broadcast</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">parse_u32</span>(<span class="ruby-identifier">broadcast_u32</span>, <span class="ruby-ivar">@prefix</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- broadcast-source -->
            
          </div>

          

          
        </div><!-- broadcast-method -->

      
        <div id="broadcast_u32-method" class="method-detail ">
          <a name="method-i-broadcast_u32"></a>

          
          <div class="method-heading">
            <span class="method-name">broadcast_u32</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the broadcast address in Unsigned 32bits format</p>

<pre>ip = IPaddress(&quot;10.0.0.1/29&quot;)

ip.broadcast_u32
  #=&gt; 167772167</pre>
            

            
            <div class="method-source-code" id="broadcast_u32-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 517</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">broadcast_u32</span>
  <span class="ruby-identifier">network_u32</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- broadcast_u32-source -->
            
          </div>

          

          
        </div><!-- broadcast_u32-method -->

      
        <div id="c-3F-method" class="method-detail ">
          <a name="method-i-c-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">c?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Checks whether the ip address belongs to a RFC 791 CLASS C network, no
matter what the subnet mask is.</p>

<p>Example:</p>

<pre>ip = IPAddress(&quot;192.168.1.1/30&quot;)

ip.c?
  #=&gt; true</pre>
            

            
            <div class="method-source-code" id="c-3F-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 777</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">c?</span>
  <span class="ruby-constant">CLASSFUL</span>.<span class="ruby-identifier">key</span>(<span class="ruby-value">24</span>) <span class="ruby-operator">===</span> <span class="ruby-identifier">bits</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- c-3F-source -->
            
          </div>

          

          
        </div><!-- c-3F-method -->

      
        <div id="data-method" class="method-detail ">
          <a name="method-i-data"></a>

          
          <div class="method-heading">
            <span class="method-name">data</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the address portion of an <a href="IPv4.html">IPv4</a> object in a
network byte order format.</p>

<pre>ip = IPAddress(&quot;172.16.10.1/24&quot;)

ip.data
  #=&gt; &quot;\254\020\n\001&quot;</pre>

<p>It is usually used to include an IP address in a data packet to be sent
over a socket</p>

<pre>a = Socket.open(params) # socket details here
ip = IPAddress(&quot;10.1.1.0/24&quot;)
binary_data = [&quot;Address: &quot;].pack(&quot;a*&quot;) + ip.data 

# Send binary data
a.puts binary_data</pre>
            

            
            <div class="method-source-code" id="data-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 252</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">data</span>
  [<span class="ruby-ivar">@u32</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-string">&quot;N&quot;</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- data-source -->
            
          </div>

          

          
        </div><!-- data-method -->

      
        <div id="each-method" class="method-detail ">
          <a name="method-i-each"></a>

          
          <div class="method-heading">
            <span class="method-name">each</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Iterates over all the IP addresses for the given network (or IP address).</p>

<p>The object yielded is a new <a href="IPv4.html">IPv4</a> object created
from the iteration.</p>

<pre>ip = IPAddress(&quot;10.0.0.1/29&quot;)

ip.each do |i|
  p i.address
end
  #=&gt; &quot;10.0.0.0&quot;
  #=&gt; &quot;10.0.0.1&quot;
  #=&gt; &quot;10.0.0.2&quot;
  #=&gt; &quot;10.0.0.3&quot;
  #=&gt; &quot;10.0.0.4&quot;
  #=&gt; &quot;10.0.0.5&quot;
  #=&gt; &quot;10.0.0.6&quot;
  #=&gt; &quot;10.0.0.7&quot;</pre>
            

            
            <div class="method-source-code" id="each-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 422</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">each</span>
  (<span class="ruby-identifier">network_u32</span><span class="ruby-operator">..</span><span class="ruby-identifier">broadcast_u32</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">parse_u32</span>(<span class="ruby-identifier">i</span>, <span class="ruby-ivar">@prefix</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- each-source -->
            
          </div>

          

          
        </div><!-- each-method -->

      
        <div id="each_host-method" class="method-detail ">
          <a name="method-i-each_host"></a>

          
          <div class="method-heading">
            <span class="method-name">each_host</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Iterates over all the hosts IP addresses for the given network (or IP
address).</p>

<pre>ip = IPAddress(&quot;10.0.0.1/29&quot;)

ip.each_host do |i|
  p i.to_s
end
  #=&gt; &quot;10.0.0.1&quot;
  #=&gt; &quot;10.0.0.2&quot;
  #=&gt; &quot;10.0.0.3&quot;
  #=&gt; &quot;10.0.0.4&quot;
  #=&gt; &quot;10.0.0.5&quot;
  #=&gt; &quot;10.0.0.6&quot;</pre>
            

            
            <div class="method-source-code" id="each_host-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 395</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">each_host</span>
  (<span class="ruby-identifier">network_u32</span><span class="ruby-operator">+</span><span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">broadcast_u32</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">parse_u32</span>(<span class="ruby-identifier">i</span>, <span class="ruby-ivar">@prefix</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- each_host-source -->
            
          </div>

          

          
        </div><!-- each_host-method -->

      
        <div id="first-method" class="method-detail ">
          <a name="method-i-first"></a>

          
          <div class="method-heading">
            <span class="method-name">first</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a new <a href="IPv4.html">IPv4</a> object with the first host IP
address in the range.</p>

<p>Example: given the 192.168.100.0/24 network, the first host IP address is
192.168.100.1.</p>

<pre>ip = IPAddress(&quot;192.168.100.0/24&quot;)

ip.first.to_s
  #=&gt; &quot;192.168.100.1&quot;</pre>

<p>The object IP doesn’t need to be a network: the method automatically gets
the network number from it</p>

<pre>ip = IPAddress(&quot;192.168.100.50/24&quot;)

ip.first.to_s
  #=&gt; &quot;192.168.100.1&quot;</pre>
            

            
            <div class="method-source-code" id="first-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 350</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">first</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">parse_u32</span>(<span class="ruby-identifier">network_u32</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>, <span class="ruby-ivar">@prefix</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- first-source -->
            
          </div>

          

          
        </div><!-- first-method -->

      
        <div id="hosts-method" class="method-detail ">
          <a name="method-i-hosts"></a>

          
          <div class="method-heading">
            <span class="method-name">hosts</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns an array with the IP addresses of all the hosts in the network.</p>

<pre>ip = IPAddress(&quot;10.0.0.1/29&quot;)

ip.hosts.map {|i| i.address}
  #=&gt; [&quot;10.0.0.1&quot;,
  #=&gt;  &quot;10.0.0.2&quot;,
  #=&gt;  &quot;10.0.0.3&quot;,
  #=&gt;  &quot;10.0.0.4&quot;,
  #=&gt;  &quot;10.0.0.5&quot;,
  #=&gt;  &quot;10.0.0.6&quot;]</pre>
            

            
            <div class="method-source-code" id="hosts-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 493</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">hosts</span>
  <span class="ruby-identifier">to_a</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- hosts-source -->
            
          </div>

          

          
        </div><!-- hosts-method -->

      
        <div id="include-3F-method" class="method-detail ">
          <a name="method-i-include-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">include?</span><span
              class="method-args">(oth)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Checks whether a subnet includes the given IP address.</p>

<p>Accepts an <a href="IPv4.html">IPAddress::IPv4</a> object.</p>

<pre>ip = IPAddress(&quot;192.168.10.100/24&quot;)

addr = IPAddress(&quot;192.168.10.102/24&quot;)

ip.include? addr
  #=&gt; true

ip.include? IPAddress(&quot;172.16.0.48/16&quot;)
  #=&gt; false</pre>
            

            
            <div class="method-source-code" id="include-3F-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 536</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">include?</span>(<span class="ruby-identifier">oth</span>)
  <span class="ruby-ivar">@prefix</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">oth</span>.<span class="ruby-identifier">prefix</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">network_u32</span> <span class="ruby-operator">==</span> (<span class="ruby-identifier">oth</span>.<span class="ruby-identifier">to_u32</span> &amp; <span class="ruby-ivar">@prefix</span>.<span class="ruby-identifier">to_u32</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- include-3F-source -->
            
          </div>

          

          
        </div><!-- include-3F-method -->

      
        <div id="include_all-3F-method" class="method-detail ">
          <a name="method-i-include_all-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">include_all?</span><span
              class="method-args">(*others)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Checks whether a subnet includes all the  given <a
href="IPv4.html">IPv4</a> objects.</p>

<pre>ip = IPAddress(&quot;192.168.10.100/24&quot;)

addr1 = IPAddress(&quot;192.168.10.102/24&quot;)
addr2 = IPAddress(&quot;192.168.10.103/24&quot;)

ip.include_all?(addr1,addr2)
  #=&gt; true</pre>
            

            
            <div class="method-source-code" id="include_all-3F-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 552</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">include_all?</span>(*<span class="ruby-identifier">others</span>)
  <span class="ruby-identifier">others</span>.<span class="ruby-identifier">all?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">oth</span><span class="ruby-operator">|</span> <span class="ruby-identifier">include?</span>(<span class="ruby-identifier">oth</span>)}
<span class="ruby-keyword">end</span></pre>
            </div><!-- include_all-3F-source -->
            
          </div>

          

          
        </div><!-- include_all-3F-method -->

      
        <div id="last-method" class="method-detail ">
          <a name="method-i-last"></a>

          
          <div class="method-heading">
            <span class="method-name">last</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Like its sibling method <a href="IPv4.html#method-i-first">IPv4#first</a>,
this method  returns a new <a href="IPv4.html">IPv4</a> object with the 
last host IP address in the range.</p>

<p>Example: given the 192.168.100.0/24 network, the last host IP address is
192.168.100.254</p>

<pre>ip = IPAddress(&quot;192.168.100.0/24&quot;)

ip.last.to_s
  #=&gt; &quot;192.168.100.254&quot;</pre>

<p>The object IP doesn’t need to be a network: the method automatically gets
the network number from it</p>

<pre>ip = IPAddress(&quot;192.168.100.50/24&quot;)

ip.last.to_s
  #=&gt; &quot;192.168.100.254&quot;</pre>
            

            
            <div class="method-source-code" id="last-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 375</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">last</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">parse_u32</span>(<span class="ruby-identifier">broadcast_u32</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>, <span class="ruby-ivar">@prefix</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- last-source -->
            
          </div>

          

          
        </div><!-- last-method -->

      
        <div id="netmask-method" class="method-detail ">
          <a name="method-i-netmask"></a>

          
          <div class="method-heading">
            <span class="method-name">netmask</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the prefix as a string in IP format</p>

<pre>ip = IPAddress(&quot;172.16.100.4/22&quot;)

ip.netmask
  #=&gt; &quot;255.255.252.0&quot;</pre>
            

            
            <div class="method-source-code" id="netmask-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">netmask</span>
  <span class="ruby-ivar">@prefix</span>.<span class="ruby-identifier">to_ip</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- netmask-source -->
            
          </div>

          

          
        </div><!-- netmask-method -->

      
        <div id="netmask-3D-method" class="method-detail ">
          <a name="method-i-netmask-3D"></a>

          
          <div class="method-heading">
            <span class="method-name">netmask=</span><span
              class="method-args">(addr)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Like <a href="IPv4.html#method-i-prefix-3D">IPv4#prefix=</a>, this method
allow you to  change the prefix / netmask of an IP address object.</p>

<pre>ip = IPAddress(&quot;172.16.100.4&quot;)

puts ip
  #=&gt; 172.16.100.4/16

ip.netmask = &quot;255.255.252.0&quot;

puts ip
  #=&gt; 172.16.100.4/22</pre>
            

            
            <div class="method-source-code" id="netmask-3D-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 210</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">netmask=</span>(<span class="ruby-identifier">addr</span>)
  <span class="ruby-ivar">@prefix</span> = <span class="ruby-constant">Prefix32</span>.<span class="ruby-identifier">parse_netmask</span>(<span class="ruby-identifier">addr</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- netmask-3D-source -->
            
          </div>

          

          
        </div><!-- netmask-3D-method -->

      
        <div id="network-method" class="method-detail ">
          <a name="method-i-network"></a>

          
          <div class="method-heading">
            <span class="method-name">network</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a new <a href="IPv4.html">IPv4</a> object with the network number 
for the given IP.</p>

<pre>ip = IPAddress(&quot;172.16.10.64/24&quot;)

ip.network.to_s
  #=&gt; &quot;172.16.10.0&quot;</pre>
            

            
            <div class="method-source-code" id="network-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 326</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">network</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">parse_u32</span>(<span class="ruby-identifier">network_u32</span>, <span class="ruby-ivar">@prefix</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- network-source -->
            
          </div>

          

          
        </div><!-- network-method -->

      
        <div id="network-3F-method" class="method-detail ">
          <a name="method-i-network-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">network?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Checks if the IP address is actually a network</p>

<pre>ip = IPAddress(&quot;172.16.10.64/24&quot;)

ip.network?
  #=&gt; false

ip = IPAddress(&quot;172.16.10.64/26&quot;)

ip.network?
  #=&gt; true</pre>
            

            
            <div class="method-source-code" id="network-3F-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 313</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">network?</span>
  <span class="ruby-ivar">@u32</span> <span class="ruby-operator">|</span> <span class="ruby-ivar">@prefix</span>.<span class="ruby-identifier">to_u32</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@prefix</span>.<span class="ruby-identifier">to_u32</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- network-3F-source -->
            
          </div>

          

          
        </div><!-- network-3F-method -->

      
        <div id="network_u32-method" class="method-detail ">
          <a name="method-i-network_u32"></a>

          
          <div class="method-heading">
            <span class="method-name">network_u32</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the network number in Unsigned 32bits format</p>

<pre>ip = IPAddress(&quot;10.0.0.1/29&quot;)

ip.network_u32
  #=&gt; 167772160</pre>
            

            
            <div class="method-source-code" id="network_u32-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 505</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">network_u32</span>
  <span class="ruby-ivar">@u32</span> &amp; <span class="ruby-ivar">@prefix</span>.<span class="ruby-identifier">to_u32</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- network_u32-source -->
            
          </div>

          

          
        </div><!-- network_u32-method -->

      
        <div id="octet-method" class="method-detail method-alias">
          <a name="method-i-octet"></a>

          
          <div class="method-heading">
            <span class="method-name">octet</span><span
              class="method-args">(index)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="IPv4.html#method-i-5B-5D">[]</a>
          </div>
          
        </div><!-- octet-method -->

      
        <div id="octets-method" class="method-detail ">
          <a name="method-i-octets"></a>

          
          <div class="method-heading">
            <span class="method-name">octets</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the address as an array of decimal values</p>

<pre>ip = IPAddress(&quot;172.16.100.4&quot;)

ip.octets
  #=&gt; [172, 16, 100, 4]</pre>
            

            
            <div class="method-source-code" id="octets-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 153</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">octets</span>
  <span class="ruby-ivar">@octets</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- octets-source -->
            
          </div>

          

          
        </div><!-- octets-method -->

      
        <div id="prefix-method" class="method-detail ">
          <a name="method-i-prefix"></a>

          
          <div class="method-heading">
            <span class="method-name">prefix</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the prefix portion of the <a href="IPv4.html">IPv4</a> object as a
<a href="Prefix32.html">IPAddress::Prefix32</a> object</p>

<pre>ip = IPAddress(&quot;172.16.100.4/22&quot;)

ip.prefix
  #=&gt; 22

ip.prefix.class
  #=&gt; IPAddress::Prefix32</pre>
            

            
            <div class="method-source-code" id="prefix-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">prefix</span>
  <span class="ruby-ivar">@prefix</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- prefix-source -->
            
          </div>

          

          
        </div><!-- prefix-method -->

      
        <div id="prefix-3D-method" class="method-detail ">
          <a name="method-i-prefix-3D"></a>

          
          <div class="method-heading">
            <span class="method-name">prefix=</span><span
              class="method-args">(num)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Set a new prefix number for the object</p>

<p>This is useful if you want to change the prefix to an object created with
<a href="IPv4.html#method-c-parse_u32">IPv4::parse_u32</a> or if the object
was created using the classful mask.</p>

<pre>ip = IPAddress(&quot;172.16.100.4&quot;)

puts ip
  #=&gt; 172.16.100.4/16

ip.prefix = 22

puts ip
  #=&gt; 172.16.100.4/22</pre>
            

            
            <div class="method-source-code" id="prefix-3D-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 141</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">prefix=</span>(<span class="ruby-identifier">num</span>)
  <span class="ruby-ivar">@prefix</span> = <span class="ruby-constant">Prefix32</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">num</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- prefix-3D-source -->
            
          </div>

          

          
        </div><!-- prefix-3D-method -->

      
        <div id="private-3F-method" class="method-detail ">
          <a name="method-i-private-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">private?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Checks if an <a href="IPv4.html">IPv4</a> address objects belongs to a
private network RFC1918</p>

<p>Example:</p>

<pre>ip = IPAddress &quot;10.1.1.1/24&quot;
ip.private?
  #=&gt; true</pre>
            

            
            <div class="method-source-code" id="private-3F-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 566</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">private?</span>
  [<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;10.0.0.0/8&quot;</span>),
   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;172.16.0.0/12&quot;</span>),
   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;192.168.0.0/16&quot;</span>)].<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">include?</span> <span class="ruby-keyword">self</span>}
<span class="ruby-keyword">end</span></pre>
            </div><!-- private-3F-source -->
            
          </div>

          

          
        </div><!-- private-3F-method -->

      
        <div id="reverse-method" class="method-detail ">
          <a name="method-i-reverse"></a>

          
          <div class="method-heading">
            <span class="method-name">reverse</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the IP address in in-addr.arpa format for DNS lookups</p>

<pre>ip = IPAddress(&quot;172.16.100.50/24&quot;)

ip.reverse
  #=&gt; &quot;50.100.16.172.in-addr.arpa&quot;</pre>
            

            
            <div class="method-source-code" id="reverse-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 581</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reverse</span>
  <span class="ruby-ivar">@octets</span>.<span class="ruby-identifier">reverse</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;.&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.in-addr.arpa&quot;</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- reverse-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="IPv4.html#method-i-arpa">arpa</a>
          </div>
          

          
        </div><!-- reverse-method -->

      
        <div id="size-method" class="method-detail ">
          <a name="method-i-size"></a>

          
          <div class="method-heading">
            <span class="method-name">size</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the number of IP addresses included in the network. It also counts
the network address and the broadcast address.</p>

<pre>ip = IPAddress(&quot;10.0.0.1/29&quot;)

ip.size
  #=&gt; 8</pre>
            

            
            <div class="method-source-code" id="size-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 475</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">size</span>
  <span class="ruby-value">2</span> <span class="ruby-operator">**</span> <span class="ruby-ivar">@prefix</span>.<span class="ruby-identifier">host_prefix</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- size-source -->
            
          </div>

          

          
        </div><!-- size-method -->

      
        <div id="split-method" class="method-detail ">
          <a name="method-i-split"></a>

          
          <div class="method-heading">
            <span class="method-name">split</span><span
              class="method-args">(subnets=2)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Splits a network into different subnets</p>

<p>If the IP Address is a network, it can be divided into multiple networks.
If <tt>self</tt> is not a network, this method will calculate the network
from the IP and then subnet it.</p>

<p>If <tt>subnets</tt> is an power of two number, the resulting  networks will
be divided evenly from the supernet.</p>

<pre>network = IPAddress(&quot;172.16.10.0/24&quot;)

network / 4   # implies map{|i| i.to_string}
  #=&gt; [&quot;172.16.10.0/26&quot;,
       &quot;172.16.10.64/26&quot;,
       &quot;172.16.10.128/26&quot;,
       &quot;172.16.10.192/26&quot;]</pre>

<p>If <tt>num</tt> is any other number, the supernet will be  divided into
some networks with a even number of hosts and other networks with the
remaining addresses.</p>

<pre>network = IPAddress(&quot;172.16.10.0/24&quot;)

network / 3   # implies map{|i| i.to_string}
  #=&gt; [&quot;172.16.10.0/26&quot;,
       &quot;172.16.10.64/26&quot;,
       &quot;172.16.10.128/25&quot;]</pre>

<p>Returns an array of <a href="IPv4.html">IPv4</a> objects</p>
            

            
            <div class="method-source-code" id="split-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 618</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">split</span>(<span class="ruby-identifier">subnets</span>=<span class="ruby-value">2</span>)
  <span class="ruby-keyword">unless</span> (<span class="ruby-value">1</span><span class="ruby-operator">..</span>(<span class="ruby-value">2</span><span class="ruby-operator">**</span><span class="ruby-ivar">@prefix</span>.<span class="ruby-identifier">host_prefix</span>)).<span class="ruby-identifier">include?</span> <span class="ruby-identifier">subnets</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Value #{subnets} out of range&quot;</span> 
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">networks</span> = <span class="ruby-identifier">subnet</span>(<span class="ruby-identifier">newprefix</span>(<span class="ruby-identifier">subnets</span>))
  <span class="ruby-keyword">until</span> <span class="ruby-identifier">networks</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">subnets</span>
    <span class="ruby-identifier">networks</span> = <span class="ruby-identifier">sum_first_found</span>(<span class="ruby-identifier">networks</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">networks</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- split-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="IPv4.html#method-i-2F">/</a>
          </div>
          

          
        </div><!-- split-method -->

      
        <div id="subnet-method" class="method-detail ">
          <a name="method-i-subnet"></a>

          
          <div class="method-heading">
            <span class="method-name">subnet</span><span
              class="method-args">(subprefix)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>This method implements the subnetting function  similar to the one
described in RFC3531.</p>

<p>By specifying a new prefix, the method calculates the network number for
the given <a href="IPv4.html">IPv4</a> object and calculates the subnets
associated to the new prefix.</p>

<p>For example, given the following network:</p>

<pre>ip = IPAddress &quot;172.16.10.0/24&quot;</pre>

<p>we can calculate the subnets with a /26 prefix</p>

<pre>ip.subnets(26).map{&amp;:to_string)
  #=&gt; [&quot;172.16.10.0/26&quot;, &quot;172.16.10.64/26&quot;, 
       &quot;172.16.10.128/26&quot;, &quot;172.16.10.192/26&quot;]</pre>

<p>The resulting number of subnets will of course always be a power of two.</p>
            

            
            <div class="method-source-code" id="subnet-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 682</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">subnet</span>(<span class="ruby-identifier">subprefix</span>)
  <span class="ruby-keyword">unless</span> ((<span class="ruby-ivar">@prefix</span>.<span class="ruby-identifier">to_i</span>)<span class="ruby-operator">..</span><span class="ruby-value">32</span>).<span class="ruby-identifier">include?</span> <span class="ruby-identifier">subprefix</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;New prefix must be between #@prefix and 32&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2</span><span class="ruby-operator">**</span>(<span class="ruby-identifier">subprefix</span><span class="ruby-operator">-</span><span class="ruby-ivar">@prefix</span>.<span class="ruby-identifier">to_i</span>)) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">parse_u32</span>(<span class="ruby-identifier">network_u32</span><span class="ruby-operator">+</span>(<span class="ruby-identifier">i</span>*(<span class="ruby-value">2</span><span class="ruby-operator">**</span>(<span class="ruby-value">32</span><span class="ruby-operator">-</span><span class="ruby-identifier">subprefix</span>))), <span class="ruby-identifier">subprefix</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- subnet-source -->
            
          </div>

          

          
        </div><!-- subnet-method -->

      
        <div id="supernet-method" class="method-detail ">
          <a name="method-i-supernet"></a>

          
          <div class="method-heading">
            <span class="method-name">supernet</span><span
              class="method-args">(new_prefix)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a new <a href="IPv4.html">IPv4</a> object from the supernetting of
the instance network.</p>

<p>Supernetting is similar to subnetting, except that you getting as a result
a network with a smaller prefix (bigger host space). For example, given the
network</p>

<pre>ip = IPAddress(&quot;172.16.10.0/24&quot;)</pre>

<p>you can supernet it with a new /23 prefix</p>

<pre>ip.supernet(23).to_string
  #=&gt; &quot;172.16.10.0/23&quot;</pre>

<p>However if you supernet it with a /22 prefix, the network address will
change:</p>

<pre>ip.supernet(22).to_string
  #=&gt; &quot;172.16.8.0/22&quot;</pre>

<p>If <tt>new_prefix</tt> is less than 1, returns 0.0.0.0/0</p>
            

            
            <div class="method-source-code" id="supernet-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 654</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supernet</span>(<span class="ruby-identifier">new_prefix</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;New prefix must be smaller than existing prefix&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">new_prefix</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@prefix</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;0.0.0.0/0&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">new_prefix</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@address</span><span class="ruby-operator">+</span><span class="ruby-node">&quot;/#{new_prefix}&quot;</span>).<span class="ruby-identifier">network</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- supernet-source -->
            
          </div>

          

          
        </div><!-- supernet-method -->

      
        <div id="to_i-method" class="method-detail method-alias">
          <a name="method-i-to_i"></a>

          
          <div class="method-heading">
            <span class="method-name">to_i</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="IPv4.html#method-i-u32">u32</a>
          </div>
          
        </div><!-- to_i-method -->

      
        <div id="to_ipv6-method" class="method-detail ">
          <a name="method-i-to_ipv6"></a>

          
          <div class="method-heading">
            <span class="method-name">to_ipv6</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Return the ip address in a format compatible with the <a
href="IPv6.html">IPv6</a> Mapped <a href="IPv4.html">IPv4</a> addresses</p>

<p>Example:</p>

<pre>ip = IPAddress(&quot;172.16.10.1/24&quot;)

ip.to_ipv6
  #=&gt; &quot;ac10:0a01&quot;</pre>
            

            
            <div class="method-source-code" id="to_ipv6-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 792</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_ipv6</span>
  <span class="ruby-string">&quot;%.4x:%.4x&quot;</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">to_u32</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-string">&quot;N&quot;</span>).<span class="ruby-identifier">unpack</span>(<span class="ruby-string">&quot;nn&quot;</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_ipv6-source -->
            
          </div>

          

          
        </div><!-- to_ipv6-method -->

      
        <div id="to_s-method" class="method-detail ">
          <a name="method-i-to_s"></a>

          
          <div class="method-heading">
            <span class="method-name">to_s</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a string with the address portion of  the <a
href="IPv4.html">IPv4</a> object</p>

<pre>ip = IPAddress(&quot;172.16.100.4/22&quot;)

ip.to_s
  #=&gt; &quot;172.16.100.4&quot;</pre>
            

            
            <div class="method-source-code" id="to_s-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 166</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>
  <span class="ruby-ivar">@address</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_s-source -->
            
          </div>

          

          
        </div><!-- to_s-method -->

      
        <div id="to_string-method" class="method-detail ">
          <a name="method-i-to_string"></a>

          
          <div class="method-heading">
            <span class="method-name">to_string</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a string with the IP address in canonical form.</p>

<pre>ip = IPAddress(&quot;172.16.100.4/22&quot;)

ip.to_string
  #=&gt; &quot;172.16.100.4/22&quot;</pre>
            

            
            <div class="method-source-code" id="to_string-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_string</span>
  <span class="ruby-node">&quot;#@address/#@prefix&quot;</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_string-source -->
            
          </div>

          

          
        </div><!-- to_string-method -->

      
        <div id="to_u32-method" class="method-detail method-alias">
          <a name="method-i-to_u32"></a>

          
          <div class="method-heading">
            <span class="method-name">to_u32</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="IPv4.html#method-i-u32">u32</a>
          </div>
          
        </div><!-- to_u32-method -->

      
        <div id="u32-method" class="method-detail ">
          <a name="method-i-u32"></a>

          
          <div class="method-heading">
            <span class="method-name">u32</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the address portion in unsigned 32 bits integer format.</p>

<p>This method is identical to the C function inet_pton to create a 32 bits
address family  structure.</p>

<pre>ip = IPAddress(&quot;10.0.0.0/8&quot;)

ip.to_i
  #=&gt; 167772160</pre>
            

            
            <div class="method-source-code" id="u32-source">
<pre>
<span class="ruby-comment"># File lib/ipaddress/ipv4.rb, line 227</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">u32</span>
  <span class="ruby-ivar">@u32</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- u32-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="IPv4.html#method-i-to_i">to_i</a>, <a href="IPv4.html#method-i-to_u32">to_u32</a>
          </div>
          

          
        </div><!-- u32-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

