<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Module: Net::SSH::Multi</title>

  <link rel="stylesheet" href="../../rdoc.css" type="text/css" media="screen" />

  <script src="../../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="module">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../../lib/net/ssh/multi/dynamic_server_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/net/ssh/multi/dynamic_server.rb">lib/net/ssh/multi/dynamic_server.rb</a></li>
          
            <li><a href="../../lib/net/ssh/multi/subsession_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/net/ssh/multi/subsession.rb">lib/net/ssh/multi/subsession.rb</a></li>
          
            <li><a href="../../lib/net/ssh/multi/version_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/net/ssh/multi/version.rb">lib/net/ssh/multi/version.rb</a></li>
          
            <li><a href="../../lib/net/ssh/multi/server_list_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/net/ssh/multi/server_list.rb">lib/net/ssh/multi/server_list.rb</a></li>
          
            <li><a href="../../lib/net/ssh/multi/channel_proxy_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/net/ssh/multi/channel_proxy.rb">lib/net/ssh/multi/channel_proxy.rb</a></li>
          
            <li><a href="../../lib/net/ssh/multi/pending_connection_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/net/ssh/multi/pending_connection.rb">lib/net/ssh/multi/pending_connection.rb</a></li>
          
            <li><a href="../../lib/net/ssh/multi/session_actions_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/net/ssh/multi/session_actions.rb">lib/net/ssh/multi/session_actions.rb</a></li>
          
            <li><a href="../../lib/net/ssh/multi/server_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/net/ssh/multi/server.rb">lib/net/ssh/multi/server.rb</a></li>
          
            <li><a href="../../lib/net/ssh/multi/session_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/net/ssh/multi/session.rb">lib/net/ssh/multi/session.rb</a></li>
          
            <li><a href="../../lib/net/ssh/multi/channel_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/net/ssh/multi/channel.rb">lib/net/ssh/multi/channel.rb</a></li>
          
            <li><a href="../../lib/net/ssh/multi_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/net/ssh/multi.rb">lib/net/ssh/multi.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">MODULE</span> <a href="Multi/SessionActions.html">Net::SSH::Multi::SessionActions</a></li>
          
          <li><span class="type">CLASS</span> <a href="Multi/Channel.html">Net::SSH::Multi::Channel</a></li>
          
          <li><span class="type">CLASS</span> <a href="Multi/ChannelProxy.html">Net::SSH::Multi::ChannelProxy</a></li>
          
          <li><span class="type">CLASS</span> <a href="Multi/DynamicServer.html">Net::SSH::Multi::DynamicServer</a></li>
          
          <li><span class="type">CLASS</span> <a href="Multi/PendingConnection.html">Net::SSH::Multi::PendingConnection</a></li>
          
          <li><span class="type">CLASS</span> <a href="Multi/Server.html">Net::SSH::Multi::Server</a></li>
          
          <li><span class="type">CLASS</span> <a href="Multi/ServerList.html">Net::SSH::Multi::ServerList</a></li>
          
          <li><span class="type">CLASS</span> <a href="Multi/Session.html">Net::SSH::Multi::Session</a></li>
          
          <li><span class="type">CLASS</span> <a href="Multi/Subsession.html">Net::SSH::Multi::Subsession</a></li>
          
          <li><span class="type">CLASS</span> <a href="Multi/Version.html">Net::SSH::Multi::Version</a></li>
          
        </ul>
      </div>
      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-start">::start</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../../CHANGELOG_rdoc.html">CHANGELOG.rdoc</a></li>
        
          <li class="file"><a href="../../README_rdoc.html">README.rdoc</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../../Net.html">Net</a></li>
        
          <li><a href="../../Net/SSH.html">Net::SSH</a></li>
        
          <li><a href="../../Net/SSH/Multi.html">Net::SSH::Multi</a></li>
        
          <li><a href="../../Net/SSH/Multi/Channel.html">Net::SSH::Multi::Channel</a></li>
        
          <li><a href="../../Net/SSH/Multi/ChannelProxy.html">Net::SSH::Multi::ChannelProxy</a></li>
        
          <li><a href="../../Net/SSH/Multi/DynamicServer.html">Net::SSH::Multi::DynamicServer</a></li>
        
          <li><a href="../../Net/SSH/Multi/PendingConnection.html">Net::SSH::Multi::PendingConnection</a></li>
        
          <li><a href="../../Net/SSH/Multi/Server.html">Net::SSH::Multi::Server</a></li>
        
          <li><a href="../../Net/SSH/Multi/ServerList.html">Net::SSH::Multi::ServerList</a></li>
        
          <li><a href="../../Net/SSH/Multi/Session.html">Net::SSH::Multi::Session</a></li>
        
          <li><a href="../../Net/SSH/Multi/SessionActions.html">Net::SSH::Multi::SessionActions</a></li>
        
          <li><a href="../../Net/SSH/Multi/Subsession.html">Net::SSH::Multi::Subsession</a></li>
        
          <li><a href="../../Net/SSH/Multi/Version.html">Net::SSH::Multi::Version</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="module">Net::SSH::Multi</h1>

    <div id="description" class="description">
      
<p><a href="Multi.html">Net::SSH::Multi</a> is a library for controlling
multiple <a href="../SSH.html">Net::SSH</a> connections via a single
interface. It exposes an API similar to that of
Net::SSH::Connection::Session and Net::SSH::Connection::Channel, making it
simpler to adapt programs designed for single connections to be used with
multiple connections.</p>

<p>This library is particularly useful for automating repetitive tasks that
must be performed on multiple machines. It executes the commands in
parallel, and allows commands to be executed on subsets of servers (defined
by groups).</p>

<pre>require 'net/ssh/multi'

Net::SSH::Multi.start do |session|
  # access servers via a gateway
  session.via 'gateway', 'gateway-user'

  # define the servers we want to use
  session.use 'user1@host1'
  session.use 'user2@host2'

  # define servers in groups for more granular access
  session.group :app do
    session.use 'user@app1'
    session.use 'user@app2'
  end

  # execute commands on all servers
  session.exec &quot;uptime&quot;

  # execute commands on a subset of servers
  session.with(:app).exec &quot;hostname&quot;

  # run the aggregated event loop
  session.loop
end</pre>

<p>See <a href="Multi/Session.html">Net::SSH::Multi::Session</a> for more
documentation.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="start-method" class="method-detail ">
          <a name="method-c-start"></a>

          
          <div class="method-heading">
            <span class="method-name">start</span><span
              class="method-args">(options={})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>This is a convenience method for instantiating a new <a
href="Multi/Session.html">Net::SSH::Multi::Session</a>. If a block is
given, the session will be yielded to the block automatically closed (see
<a
href="Multi/Session.html#method-i-close">Net::SSH::Multi::Session#close</a>)
when the block finishes. Otherwise, the new session will be returned.</p>

<pre>Net::SSH::Multi.start do |session|
  # ...
end

session = Net::SSH::Multi.start
# ...
session.close</pre>

<p>Any options are passed directly to <a
href="Multi/Session.html#method-c-new">Net::SSH::Multi::Session.new</a>
(q.v.).</p>
            

            
            <div class="method-source-code" id="start-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/multi.rb, line 57</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">start</span>(<span class="ruby-identifier">options</span>={})
  <span class="ruby-identifier">session</span> = <span class="ruby-constant">Session</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">session</span>
      <span class="ruby-identifier">session</span>.<span class="ruby-identifier">loop</span>
      <span class="ruby-identifier">session</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">session</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- start-source -->
            
          </div>

          

          
        </div><!-- start-method -->

      
      </div><!-- public-class-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

